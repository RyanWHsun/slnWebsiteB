@model IEnumerable<prjWebsiteB.Models.TUser>

@section Styles
{
    <link href="~/lib/datatables/css/jquery.datatables.min.css" rel="stylesheet" />
}


<p>
    <a asp-action="Create">Create New</a>
</p>
<table class="table table-striped table-hover">
    <thead class="table-primary">
        <tr>
            @* <th></th> *@
            <th>等級</th>
            <th>姓名</th>
            <th>暱稱</th>
            <th>性別</th>
            <th>生日</th>
            <th>聯絡電話</th>
            <th>電子信箱</th>
            <th>地址</th>
            <th>註冊日期</th>
            <th>密碼</th>
            <th>頭像</th>
        </tr>
    </thead>
    <tbody>
        <tr>

        </tr>
    </tbody>
</table>



@section Scripts
   {
    <script src="~/lib/datatables/js/jquery.datatables.min.js"></script>
    <script src="https://cdn.datatables.net/fixedheader/3.3.1/js/dataTables.fixedHeader.min.js"></script>
    <script>
        $(document).ready(function(){
        $("table").dataTable(
            {
                ajax:{
                type:'GET',
                url:"/TUsers/IndexJson",
                dataSrc: function (json) { return json; }
                // defaultContent:"<button class='btn btn-info'></button>"
            },
            columns:[
                 // {
                 //            "data": null,   新增一列，这里不需要数据源
                 //            "width": "20%",
                 //            "render": function (data, type, row) {
                 //                return '<button class="btn btn-primary" >查看</button>' +
                 //                       '<button class="btn btn-warning" >编辑</button>' +
                 //                       '<button class="btn btn-danger" >删除</button>';
                 //            }
                 //        }
                {"data":"fUserRankId","width":"18%"},
                {"data":"fUserName","width":"10%"},
                {"data":"fUserNickName","width":"10%"},
                {"data":"fUserSex","width":"10%"},
                {"data":"fUserBirthday","width":"10%"},
                {"data":"fUserPhone","width":"10%"},
                {"data":"fUserEmail","width":"10%"},
                {"data":"fUserAddress","width":"30%"},
                {"data":"fUserComeDate","width":"10%"},
                {"data":"fUserPassword","width":"10%"},
                { "data": "fUserImage",  // 二进制数据字段
                        "width": "10%",
                        "render": function(data, type, row) {
                            // 如果图片数据存在且是 Base64 字符串，渲染为 img 标签
                            if (data) {
                                return '<img src="data:image/jpeg;base64,' + data + '" alt="User Image" style="width: 50px; height: auto;" />';
                            } else {
                                return '<img src="/images/userNoImage.jpeg" title="沒有頭像" alt="沒有頭像" style="width: 50px; height: auto;" />';
                            }
                        }
                },

            ],
            fixedHeader:{header:true},
              language: {
              url:'https:cdn.datatables.net/plug-ins/1.13.1/i18n/zh-HANT.json'
            }
        }
        );

        });


    </script>
}